## 서울시립대학교 스타벅스 개설 시 유동인구 변화로 상권 발달 예측
> 기간 : 2023.05.24 ~ 2023.06.11

## 문제의식

> OO대 근처에는 왜 **스타벅스**가 없을까?
> 

이번 프로젝트는 학교 수업시간에 진행한 팀프로젝트입니다. 저희 팀이 처음 주제를 정할때 우선적으로 고려한 것이 있습니다. 바로 프로젝트를 평가하시는 교수님이 “신박한 주제”를 원하는 니즈를 우선적으로 파악하고 여기서 부터 주제를 생각했습니다.

저희 팀의 주제는 “OO대 근처에는 왜 **스타벅스**가 없을까?”라는 궁굼증에서 시작하여, “다른 학교들에 비해 OO대학교 앞은 **상권 발달**이 미비하다”라는 답을 얻었고 그러면 “스타벅스가 개설하면 상권이 발달할까?”라는 물음에 대해 **유동인구** 증가와 **상권** 발달을 연관할 수 있다고 판단하여,  스타벅스가 정문앞에 생겼을때를 가정하여 **유동인구 증감**을 예측하고, 이를 바탕으로 OO대앞 상권에 대한 궁금증을 해소를 위해 본 프로젝트를 시작했습니다.

## 데이터 수집 & 전처리

> **데이터 수집 기준**
> 

스타벅스 입점시 유동인구 변화 예측이 목적임을 생각하며 먼저, **유동인구**를 종속변수로 두고 **스타벅스 유입요소, 교통의 편의성, 경제지표, 경쟁시설**를 고려하여 변수를 수집했습니다.

- 서울시 데이터를 기준으로 데이터를 수집
- 스타벅스 유입요소를 고려해 매장 TYPE, 대학교와 스타벅스 사이 거리정보 데이터를 수집
- 교통의 편의성을 고려해 스타벅스 주차장 여부, 역세권 여부를 수집
- 지역의 경제와 한국의 경제 상황을 확인할 수 있는 지역 공시지가와 ESI(경제심리지수)를 경제지표로 수집
- 스타벅스가 입점 후 경쟁시설의 증가를 확인하기 위해 기존 카페수(저가/중고가) 1년 이내 증가한 카페수(저가/중고가)를 경쟁시설 데이터로 수집

*유동인구(생활인구)가 2017년 이후로만 제공하므로 해당년도 이후 데이터만 추출*

> **스타벅스 기본 정보 데이터**
> 
1. **수집**
- 공식 홈페이지 크롤링
    
    →(점포 지점명 / 주소 / 위경도(좌표) / 주차장 여부 / 매장 TYPE)
    
- 지방행정인허가데이터(개점일자 대체)
1. **처리**
- 날짜 : 2017년 이후 데이터 취급(603 → 272개)
- 중복 내용 : 중복되는 내용을 하나로 통합
- 문제 : “개점일자” 정보 제공 X
    
    → 지방행정인허가데이터의 인허가일자를 개점일자로 대체
    
1. **결과**
- 데이터

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/361cd71a-f3cc-4137-b966-f43648219550/image.png)

- 기초통계량

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/2b43d2db-b4b3-424e-a493-ce6515ad4420/image.png)

**주차장 여부**는 **비슷**하며 **매장 TYPE**은 일반이 **84%**로 DT(6%)와 R(10%)를 합친것 보다 많음

> **주차장 여부 / 역세권 여부**
> 
1. **수집**
- 공식 홈페이지 크롤링 / 웹서핑
    
    → (주차장 정보 / 주차 가능 여부 / 지하철 정보 / 오시는 길)
    
- 지하철 출구 데이터(산림 빅데이터 거래소)
1. **처리**
- 문제
    - 폐업한 시점의 주차장 정보 알 수 없음
        
        → 직접 지점명 웹서핑
        
    - 오시는 길과 지하철 정보 간의 괴리(오시는 길의 지하철역보다 매장에서 더 가까운 지하철역 존재)
        
        → 지하철 출구 데이터 수집 후 지하철 출구에 **다중 고리 버퍼(고정거리)** 생성 (500m 이내 = 1, 500m 밖 = 0)(**유클리디안 거리** 사용)
        
1. **결과**

- 데이터

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/ee162a42-933d-4d54-aa0b-e07217ca700b/image.png)

- 기초통계량

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/6a71936e-c137-478c-9ed6-dea795cf96eb/image.png)

500m 이내에 지하철이 존재하는 스타벅스 지점이 **83%**로 대부분을 차지한다 

> **대학과의 거리 / 경쟁사 개수**
> 
1. 대학과의 거리
    
    스타벅스에서 지정한 대학인근 여부는 실제 대학과의 거리와 관련 X
    
    → 직접 대학 정문 좌표 수집 후 스타벅스와 거리 계산 (**유클리디안 거리** 사용)
    
    → 거리 점수화 : 250m이내 (3), 500m이내(2), 1000m이내(1), 그 외(0)
    
2. 경쟁사 개수
    
    출처 : 지방행정인허가데이터
    
    경쟁사 : 한국브랜드평판연구소에 정한 브랜드 중 8개 선정
    
    스타벅스 근방 **500m** 내의 경쟁사 정보와 결합
    
    스타벅스 인허가일에 맞춰 해당시점 경쟁사 개수 비교
    
    → 기존 저가 카페수, 1년 이내 저가 카페 증가수, 기존 중고가 카페수, 1년 이내 중고가 카페수
    

> **공시지가**
> 
1. **수집**
- 출처 : 국토지리정보원 국토정보플랫폼
- 기간 : 2017년 ~ 2023년 1월, 7월
- 내용 : 공시지가 데이터 250m 격자로 데이터 수집
1. **처리**
- 스타벅스가 존재하는 집계구 추출
- 집계구와 겹치는 250M 격자 추출
- 각 집계구에 해당하는 격자값(공시지가) 평균값 사용
- 스타벅스 입점 전후 공시지가 계산

→  후_공시지가 - 전_공시지가

- 스타벅스 기본정보데이터, 주차장 여부&역세권 여부, 대학과의 거리&경쟁사 개수, 공시지가 **전처리 코드**
    
    QGIS로 처리 제외한 코드
    
    [https://github.com/KwakTissue/starbucks_and_floating_population/blob/main/파이썬 코드/데이터 통합.ipynb](https://github.com/KwakTissue/starbucks_and_floating_population/blob/main/%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%8A%E1%85%A5%E1%86%AB%20%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3/%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%90%E1%85%A9%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8.ipynb)
    

> **유동인구**
> 
1. **수집**
- 출처 : 서울생활인구데이터
- 정의 : “특정시점”에 “특정위치”에 존재하는 인구
- 기간 : 2017.01.01 ~ 2023.05.31 (19.10.15~27 X)
- 범위 : 집계구 단위 → 데이터 일관성을 위해 2016년 집계구 코드 사용
1. **처리**
- 문제
    - **10세 미만 저연령층과 80세 이상의 고연령층** : 통신데이터 기준인 생활인구 데이터에서 휴대폰 가입률이 타 연령대에 비해 현저히 낮아 **직접적인 추계** 어려움
    
    → 주변연령인 10~14세와 70~79세 연령의 추계결과와 행정동 단위에서 주민등록인구 비를 비교하여 대체
    
    - 시간대별 생활인구수 양극화가 심해 1일 총생활인구수 계산 시 **평균**이 아닌 **합**을 사용
- 총생활인구수(약 3개월 계산)
    - 스타벅스 개점일을 중심으로 유동인구 **변화 비율**을 확인하기 위해 총생활인구비율(약 3개월) 계산
    - 계산식
        
        $$
         \frac{개점후3개월유동인구평균 - 개점전3개월유동인구 평균}{개점후3개월유동인구평균}
        $$
        
- 유동인구 **전처리 코드**
    
    [https://github.com/KwakTissue/starbucks_and_floating_population/blob/main/파이썬 코드/유동인구_데이터_전처리_코드.ipynb](https://github.com/KwakTissue/starbucks_and_floating_population/blob/main/%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%8A%E1%85%A5%E1%86%AB%20%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3/%E1%84%8B%E1%85%B2%E1%84%83%E1%85%A9%E1%86%BC%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%80%E1%85%AE_%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5_%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5_%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3.ipynb)
    

> **경제심리지수(ESI)**
> 
- 수집 이유 : 유동인구를 설명할 수 있는 외부지표 필요
- 출처 : KOSIS 통계청
- 원계열 사용

→ 원계열과 순환변동치의 차이가 크지 않음

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/67fc2e68-1f11-4cec-8acd-3ba8fa4b6c80/image.png)

**최종 데이터 셋**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/e2ae5735-4328-49d3-b59c-3af99211f022/image.png)

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/dd234c8c-ff1c-4f3c-92e6-7af0f9d670fc/image.png)

## 분석

1. 스타벅스 입점시 유동인구 변화 비율(종속변수) 통계량 확인
- **0을 기준으로 유동인구 변화 비율 개수 확인**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/2e0823dc-1122-440e-a9b1-6d9be0c4b235/image.png)

→ 스타벅스 입점시 유동인구 변화 비율 개수를 보았을때 **증가** **140**, **감소** **119**로 스타벅스 입점과 유동인구 관련을 확인할 수 없음

- **유동인구 박스플롯**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/2ceb9197-f54d-4fdd-b784-541ee3eb4dfa/image.png)

이상치 개수가 15개로 약 **5.8%** 비중 차지 따라서 **5% 이상**이므로 데이터에 이상치가 많이 포함되어 있다 판단

→ 이상치의 영향을 적게 받는 **Robust Scaling** 적용 (데이터 개수가 적어 이상치 삭제 X)

→ 적용 결과 모델 성능이 예상만큼 안나와 유동인구 범주화 결정

1. 상관분석

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/5b62eda4-4412-48fc-a968-e3e2588504ee/image.png)

 → **상관관계** 확인을 통해 대학거리와 중고가카페 증가수 변수가 **상관계수** **0.11**로 스타벅스 입점시 유동인구 변화에 가장 크게 영향을 미치는 것으로 파악

## 예측 모델링

1. **종속변수 범주화**
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/cb816eac-bdd7-4d32-8f3d-1ea622b17bff/image.png)
    

→ 유동인구를 33%, 66% 분위수를 기준으로 **3구간** 분할(범주화 : Low, Mwdium, High)하여 모델링에 적용

→ Low : 87개, Medium : 86개, High : 86개

1. **모델링 후 모델 선택**

데이터 개수가 적고 범주형 변수를 사용하고 주요 변수를 확인하기 위해 앙상블 모델인 랜덤포레스트, XGboost, LightGBM를 사용

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/d88ec632-577c-4c9f-b378-f97024db00d8/image.png)

→ 정확도가 가장 높은 XGboost를 선택하여 예측 과정 진행

→ 상관분석과 3개 모델의 변수기여도를 확인한 결과 **공시지가, ESI_원계열, 중고가카페수, 대학거리**가 스타벅스 입점시 유동인구 변화에 큰 영향을 미치는 변수임을 확인

1. **예측 진행**
- **예측 데이터 셋(블러 처리로 사업장명 제외)**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/94ea4d36-8e7f-4af9-bcaa-590ff27e7d64/cd12743c-60cf-462f-90c1-852dbdf1197f/image.png)

→ 2023년 5월을 기준으로 **주차장여부**와 **스타벅스 매장 타입**에만 변화를 주어 예측 데이터셋을 구성

- **결과**

→ 예측 결과 MEDIUM으로 분류되어 OO대학교 스타벅스 입점시 유동인구 변화가 거의 없다라는 결과 확인

→ 즉, OO대학교 앞은 스타벅스가 입점해도 상권발달이 **똑같다**라는 결론 확인

## 종합 결과

- 스타벅스 입점시 유동인구 변화 비율 개수를 보았을때 **증가** **140**, **감소** **119**로 스타벅스 입점과 유동인구 관련을 확인할 수 없음
- 상관분석과 3개 모델의 변수기여도를 확인한 결과 **공시지가, ESI_원계열, 중고가카페수, 대학거리**가 스타벅스 입점시 유동인구 변화에 큰 영향을 미치는 변수임을 확인
- 예측 결과 **MEDIUM**으로 분류되어 OO대학교 스타벅스 입점시 유동인구 변화가 거의 없다라는 결과 확인
- 즉, OO대학교 앞은 스타벅스가 입점해도 상권발달이 **똑같다**라는 결론 확인

**성과**

관련 발표 수업 1등 점수를 받았으며, 다음 연도 수업에서 우수 발표 자료로 쓰임
